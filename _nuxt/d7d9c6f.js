(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{334:function(e,t,r){"use strict";r(5),r(4),r(2),r(1),r(6),r(3),r(7);var n=r(24),o=r(0),c=(r(67),r(11),r(19),r(70),r(98)),l=r.n(c),f=r(326);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function h(e){var t=l.a.create({baseURL:"https://ideality-stage.herokuapp.com/api/notion/",headers:m({},e?{Authorization:"Bearer ".concat(e)}:{})});Object.assign(this,{createPage:function(e){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c,l,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.parent,c=e.properties,e.content,r.next=3,t.post("pages",{parent:n,properties:Object(f.chain)(c).mapValues((function(e,t){return"string"==typeof e?Object(o.a)({},"name"===t?"title":"rich_text",[{text:{content:e}}]):"number"==typeof e?{number:e}:void 0})).mapKeys((function(e,t){return Object(f.upperFirst)(t).replace(/(?<=[a-z])(?=[A-Z])/g," ")})).value()});case 3:return l=r.sent,v(data=l.data),r.abrupt("return",data);case 7:case"end":return r.stop()}}),r)})))()},getPage:function(e){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get("pages/".concat(e));case 2:return n=r.sent,v(data=n.data),r.abrupt("return",data);case 6:case"end":return r.stop()}}),r)})))()}})}function v(data){data.properties=Object(f.chain)(data.properties).mapKeys((function(e,t){return Object(f.camelCase)(t)})).mapValues((function(object,e){var t=function e(object){return object.type?e(object[object.type]):object}(object);return["title","rich_text"].includes(object.type)&&(t=t[0].plain_text),t})).value()}h.anon=new h,t.a=h},370:function(e,t,r){"use strict";r.r(t);var n=r(24),o=(r(39),r(11),r(164),r(67),r(334)),c={data:function(){var e=this.$route.query;return{id:e.id,url:e.url,shortLink:null,copied:!1,mounted:!1}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.url,n=e.id,!r){t.next=5;break}e.shorten(),t.next=10;break;case 5:if(!n){t.next=10;break}return t.next=8,o.a.anon.getPage(n);case 8:c=t.sent.properties.url,window.location=c;case 10:e.mounted=!0;case 11:case"end":return t.stop()}}),t)})))()},methods:{copyToClipboard:function(){var e=this,t=this.shortLink;navigator.clipboard.writeText(t),this.copied=!0,setTimeout((function(){return e.copied=!1}),1e3)},shorten:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.url)){t.next=15;break}return t.prev=2,t.next=5,o.a.anon.createPage({parent:{database_id:"7bcfca75ac5f40b68c3cf876b08316e2"},properties:{name:r.match(/^(?:\w+:\/\/)([^\/]+)/)[1],url:r}});case 5:n=t.sent,c=n.properties.shortLink,console.log({shortLink:c}),Object.assign(e,{shortLink:c,url:null}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),e.url=null,console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()}},watch:{url:function(e){e&&this.shorten()}}},l=r(66),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vh-100 d-flex align-items-center justify-content-center text-center"},[!e.mounted||e.id||e.url?r("span",[r("b-spinner",{staticClass:"ml-2",attrs:{variant:"primary",animation:{name:"border",duration:1e3,timing:"ease-in-out",delay:100}}}),e._v(" "),r("span",{staticClass:"ml-2",domProps:{textContent:e._s(e.url?"Shortening your link":e.id?"Redirecting":"Loading")}}),e._v(", please wait...\n  ")],1):[e.shortLink?r("span",{staticClass:"text-muted",staticStyle:{cursor:"pointer"},domProps:{textContent:e._s(e.copied?"Copied!":e.shortLink+" (click to copy)")},on:{click:e.copyToClipboard}}):r("b-form-input",{staticClass:"mb-3",staticStyle:{"max-width":"400px"},attrs:{lazy:"",placeholder:e.shortLink?"Enter another long URL":"Enter a long URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})]],2)}),[],!1,null,null,null);t.default=component.exports}}]);